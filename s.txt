/*Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await dotenv.load(fileName: ".env");

  AndroidOptions getAndroidOptions() => const AndroidOptions(
    encryptedSharedPreferences: true,
  );

  final secureStorage = FlutterSecureStorage(aOptions: getAndroidOptions());

  final authLocalDataSource = AuthLocalDataSourceImpl(storage: secureStorage);
  final authRemoteDataSource = AuthRemoteDataSourceImpl();
  final userRemoteDataSource = UserRemoteDataSourceImpl();
  final planetDataSource = PlanetRemoteDataSourceImpl();
  
  final authRepository = AuthRepositoryImpl(
    remoteDataSource: authRemoteDataSource,
    localDataSource: authLocalDataSource,
  );
  final userRepository = UserRepositoryImpl(remoteDataSource: userRemoteDataSource, localDataSource: authLocalDataSource);
  final planetRepository = PlanetRepositoryImpl(remoteDataSource: planetDataSource);

  final createUserUseCase = CreateuserUsecase(authRepository);
  final verifyUserUseCase = VerifyuserUsecase(authRepository);
  final getAllPlanetsUseCase = GetAllPlanetsUseCase(planetRepository);
  final getPlanetOfDayUseCase = GetPlanetOfDayUseCase(planetRepository);
  final getProfileUseCase = GetProfileUseCase(userRepository);
  final deleteAccountUseCase = DeleteAccountUseCase(userRepository);
  final logoutUseCase = LogoutUseCase(userRepository); 
  
  runApp(
    MainApp(
      createUserUseCase: createUserUseCase,
      verifyUserUseCase: verifyUserUseCase,
      getAllPlanetsUseCase: getAllPlanetsUseCase,
      getPlanetOfDayUseCase: getPlanetOfDayUseCase,
      getProfileUseCase: getProfileUseCase,
      deleteAccountUseCase: deleteAccountUseCase,
      logoutUseCase: logoutUseCase,
    ),
  );
}*/


class MainApp extends StatelessWidget {
  final CreateuserUsecase createUserUseCase;
  final VerifyuserUsecase verifyUserUseCase;
  final GetAllPlanetsUseCase getAllPlanetsUseCase;
  final GetPlanetOfDayUseCase getPlanetOfDayUseCase;
  final GetProfileUseCase getProfileUseCase;
  final DeleteAccountUseCase deleteAccountUseCase;
  final LogoutUseCase logoutUseCase;

  const MainApp({
    super.key, 
    required this.createUserUseCase,
    required this.verifyUserUseCase,
    required this.getAllPlanetsUseCase,
    required this.getPlanetOfDayUseCase,
    required this.getProfileUseCase,
    required this.deleteAccountUseCase,
    required this.logoutUseCase
  });

  @override
  Widget build(BuildContext context) {
    return MultiProvider(
      providers: [
        ChangeNotifierProvider(
          create: (_) => RegistreProvider(createUserUseCase),
        ),
        ChangeNotifierProvider(
          create: (_) => LoginProvider(verifyUserUseCase),
        ),
        ChangeNotifierProvider(
          create: (_) => HomeProvider(
            getAllPlanetsUseCase: getAllPlanetsUseCase,
            getPlanetOfDayUseCase: getPlanetOfDayUseCase,
          ),
        ),
        ChangeNotifierProvider(
          create: (_) => ProfileProvider(
            getProfileUseCase: getProfileUseCase, 
            logoutUseCase: logoutUseCase, 
            deleteAccountUseCase: deleteAccountUseCase
          ),
        ),
      ],
      child: MaterialApp.router(
        debugShowCheckedModeBanner: false,
        title: 'Astronomía Registro',
        theme: ThemeData.dark().copyWith(
          scaffoldBackgroundColor: Color(0xFF101622),
          primaryColor: Color(0xFF135bec),
          colorScheme: ColorScheme.dark(
            primary: Color(0xFF135bec),
            secondary: Color(0xFF135bec),
          ),
        ),
        routerConfig: AppRouter.router,
      ),
    );
  }
}


profile Widget
_buildDropdownSimulation(
          value: "Orión",
          icon: Icons.star_outline,
        ),

Widget _buildDropdownSimulation({
    required String value,
    required IconData icon,
  }) {
    return Container(
      decoration: BoxDecoration(
        color: Color(0xFF1f293b), // input-dark
        borderRadius: BorderRadius.circular(12),
      ),
      padding: EdgeInsets.symmetric(horizontal: 16, vertical: 4),
      child: Row(
        children: [
          Icon(icon, color: Colors.grey, size: 22),
          SizedBox(width: 12),
          Expanded(
            child: DropdownButtonHideUnderline(
              child: DropdownButton<String>(
                value: value,
                dropdownColor: Color(0xFF1f293b),
                icon: Icon(Icons.expand_more, color: Colors.grey),
                style: TextStyle(color: Colors.white, fontSize: 16),
                onChanged: (newValue) {},
                items: AppResources.slected.map<DropdownMenuItem<String>>((String value) {
                  return DropdownMenuItem<String>(
                    value: value,
                    child: Text(value),
                  );
                }).toList(),
              ),
            ),
          ),
        ],
      ),
    );
  }
